<div data-controller="otp" class="mx-auto max-w-7xl mb-4 px-4 sm:px-6 lg:px-8">
  <%= render "shared/form_header", title: "Login", subtitle: "Secondary device", description: "Use the code we sent you to login on a secondary device, like your child's tablet. If you need a code, when you are logged in click 'Settings' and then 'One time password.'" %>
  <%= form_with url: temporary_code_login_path do |f| %>
    <%= render "shared/email_field", form: f, model: @user, placeholder: "you@example.com" %>
    <%= f.label :otp, "One time password", class: "block text-sm font-medium leading-6 text-gray-900"  %>
    <%= render(OtpComponent.new) %>
    <div data-otp-target="error" class="flex hidden">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="ml-3">
        <div class="text-sm text-red-700">
          <p>Invalid paste input: One time password must be six digits.</p>
        </div>
      </div>
    </div>
    <%= hidden_field_tag :otp, "", data: { otp_target: "input" } %>
    <div class="mt-6 flex items-center justify-end gap-x-6">
      <%= render(SecondaryLinkComponent.new(text: "Cancel", path: new_login_path)) %>
      <%= f.submit "Login", data: { otp_target: "submit" }, class: "rounded-md bg-cyan-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600" %>
    </div>
  <% end %>
</div>
